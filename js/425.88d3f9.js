"use strict";(self.webpackChunkaobtools=self.webpackChunkaobtools||[]).push([[425],{3621:(t,e,n)=>{n.d(e,{Z:()=>l});var a=n(8081),i=n.n(a),o=n(3645),r=n.n(o)()(i());r.push([t.id,"\n.row-bg[data-v-0f925cd4] {\n  height: 100%;\n  box-sizing: border-box;\n}\n\n/* .search-width {\n  width: 100% !important;\n} */\n.base-addr-input[data-v-0f925cd4] {\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n.trans-button[data-v-0f925cd4] {\n  /* margin-top: 10px; */\n  width: 100%;\n  height: 45px;\n  font-size: 16px;\n}\n.upload-row[data-v-0f925cd4] {\n  width: 100%;\n}\n.upload-button[data-v-0f925cd4] {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-content: center;\n  justify-content: flex-end;\n}\n.cell-item[data-v-0f925cd4] {\n  display: flex;\n  align-items: center;\n}\n.cell-name[data-v-0f925cd4] {\n  font-weight: 600;\n}\n.margin-top[data-v-0f925cd4] {\n  margin-top: 10px;\n}\n.item-width[data-v-0f925cd4] {\n  width: 100px;\n}\n.code-stlye[data-v-0f925cd4] {\n  font-size: 12px;\n  white-space: pre-line;\n}\n.el-button--text[data-v-0f925cd4] {\n  margin-right: 15px;\n}\n.el-select[data-v-0f925cd4] {\n  width: 300px;\n}\n.el-input[data-v-0f925cd4] {\n  width: 300px;\n}\n.dialog-footer button[data-v-0f925cd4]:first-child {\n  margin-right: 10px;\n}\ndiv[data-v-0f925cd4] .el-autocomplete {\n  width: 100%;\n}\n.code-button[data-v-0f925cd4] {\n  margin-top: 5px;\n  font-size: 16px;\n  width: 100%;\n  height: 40px;\n}\nhtml[data-v-0f925cd4], body[data-v-0f925cd4] {\n  margin: 0;\n  padding: 0;\n}\n",""]);const l=r},1425:(t,e,n)=>{n.r(e),n.d(e,{default:()=>V});var a=n(6252),i=n(3577),o={class:"code-stlye"},r={class:"dialog-footer"},l=n(2152),c=n.n(l),d=n(1721),u=n(5108);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const f={data:function(){return{searchText:"",inputFileName:"",textarea:"",gameInfo:"",masterCode:"",dialogFormVisible:!1,gameData:[],tableData:[],selectData:[],form:{name:"",tid:"",bid:""},bids:[]}},computed:{},mounted:function(){var t=this;d.ZP.get("titles").then((function(e){t.gameData=e.data.map((function(t,e){return{index:e,tid:t}}))})).catch((function(t){u.log(t)}))},methods:{caculateTapped:function(){if(""!=this.textarea){var t=this.textarea+"\n[",e=(t="{"+(t=(t=t.replace(/^[^\{}]*\{/g,"")).replace(/\r/g,""))).match(/\{(.*?)\}/g);e&&e.length>0?(this.gameInfo=e[0].replace("{","").replace("}","")," (TID: ".concat(this.form.tid," BID: ").concat(this.form.bid,")")):this.gameInfo=this.form.name+" (TID: ".concat(this.form.tid," BID: ").concat(this.form.bid,")");var n=t.match(/(\})((.|\n)+?)(\n\[)/g);n&&n.length>0?this.masterCode+=n[0].replace(/\}[\n]/g,"").replace(/[\n]\[/g,""):this.masterCode="";var a=t.match(/\[(.+?)\]/g);a&&a.length>0&&(a=a.map((function(t){return t.replace(/[\[\]]/g,"")})));var i=t.match(/(\])((.|\n)*?)(\n\[)/g);i&&i.length>0&&(i=i.map((function(t){return t.replace(/\][\n]/g,"").replace(/[\n]?\[/g,"")}))),this.tableData=a.map((function(t,e){return{title:t,code:i[e]}})),this.$notify({title:"提示",message:"解析成功",type:"success"})}else this.$notify({title:"提示",message:"请输入内容",type:"warning"})},createCode:function(){if(0==this.selectData.length)this.$notify({title:"提示",message:"未选中任何项目",type:"warning"});else{var t="";this.gameInfo&&(t+="{"+this.gameInfo+"}\n"),t+=this.masterCode;var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}(this.selectData);try{for(n.s();!(e=n.n()).done;){var a=e.value;t+="["+a.title+"]\n",t+=a.code+"\n\n"}}catch(t){n.e(t)}finally{n.f()}this.textarea=t,this.copyTextToClipboard(t)}},querySearch:function(t,e){e(t?this.gameData.filter((function(e){return e.tid.indexOf(t)>-1})).map((function(t){return{value:t.tid}})):[])},handleExceed:function(){},handleSelectionChange:function(t){this.selectData=t},handleSearchSelect:function(t){var e=this.gameData.find((function(e){return e.tid.indexOf(t.value)>-1}));e&&(this.$refs.TidTableRef.setCurrentRow(e),this.$refs.TidTableRef.setScrollTop(40*e.index))},tableRowClick:function(t){var e=this;d.ZP.get("titles/"+t.tid).then((function(n){var a=n.data.find((function(t){return t.indexOf(".txt")>-1}));e.form=a?{name:a.split(".")[0],tid:t.tid,bid:""}:{name:"未知游戏",tid:t.tid,bid:""},n.data.find((function(t){return t.indexOf("cheats")>-1}))&&d.ZP.get("titles/"+t.tid+"/cheats").then((function(t){t.data&&t.data.length>0&&(e.bids=t.data.filter((function(t){return t.indexOf(".txt")>-1})).map((function(t){return t.split(".")[0]})))})),e.dialogFormVisible=!0}))},cheatSelected:function(){var t=this;""!=this.form.bid?(this.dialogFormVisible=!1,d.ZP.get("titles/"+this.form.tid+"/cheats/"+this.form.bid+".txt").then((function(e){t.textarea=e.data,t.caculateTapped()}))):this.$notify({title:"提示",message:"请选择BID",type:"warning"})},getGameCount:function(){return["","数量合计: ".concat(this.gameData.length)]},getSummaries:function(){return["","数量合计: ".concat(this.tableData.length),"已选中: ".concat(this.selectData.length)]},copyTextToClipboard:function(t){var e=this,n=new(c())(".code-button",{text:function(){return t}});n.on("success",(function(){e.$notify({title:"提示",message:"金手指已生成到系统剪切板(使用Ctrl+V粘贴)～Enjoy",type:"success"}),n.destroy()})),n.on("error",(function(){e.$notify({title:"提示",message:"生成内容已经复制到剪切板",type:"warning"}),n.destroy()}))}}};var m=n(3379),h=n.n(m),p=n(7795),g=n.n(p),b=n(569),w=n.n(b),y=n(3565),v=n.n(y),x=n(9216),C=n.n(x),D=n(4589),S=n.n(D),W=n(3621),T={};T.styleTagTransform=S(),T.setAttributes=v(),T.insert=w().bind(null,"head"),T.domAPI=g(),T.insertStyleElement=C(),h()(W.Z,T),W.Z&&W.Z.locals&&W.Z.locals;const V=(0,n(3744).Z)(f,[["render",function(t,e,n,l,c,d){var u=(0,a.up)("el-autocomplete"),s=(0,a.up)("el-row"),f=(0,a.up)("el-table-column"),m=(0,a.up)("el-table"),h=(0,a.up)("el-col"),p=(0,a.up)("el-descriptions-item"),g=(0,a.up)("el-descriptions"),b=(0,a.up)("el-button"),w=(0,a.up)("el-input"),y=(0,a.up)("el-form-item"),v=(0,a.up)("el-option"),x=(0,a.up)("el-select"),C=(0,a.up)("el-form"),D=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(s,{class:"row-bg",justify:"space-around",align:"top"},{default:(0,a.w5)((function(){return[(0,a.Wm)(h,{span:9},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{class:"upload-row",justify:"space-between",align:"middle"},{default:(0,a.w5)((function(){return[(0,a.Wm)(u,{modelValue:t.searchText,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.searchText=e}),"fetch-suggestions":d.querySearch,"trigger-on-focus":!1,clearable:"",class:"search-width",placeholder:"请输入TID",onSelect:d.handleSearchSelect},null,8,["modelValue","fetch-suggestions","onSelect"])]})),_:1}),(0,a.Wm)(m,{ref:"TidTableRef",class:"margin-top",data:t.gameData,border:"",style:{width:"100%"},height:"585","show-summary":"","empty-text":"暂无数据","highlight-current-row":!0,"summary-method":d.getGameCount,onSelectionChange:d.handleSelectionChange,onRowClick:d.tableRowClick},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{property:"index",label:"序号",width:"100"}),(0,a.Wm)(f,{property:"tid",label:"TID"}),(0,a.kq)(' <el-table-column property="bid" label="BID" width="180" /> ')]})),_:1},8,["data","summary-method","onSelectionChange","onRowClick"]),(0,a.kq)(' <el-input\n        class="base-addr-input"\n        spellcheck="false"\n        v-model="textarea"\n        :rows="25"\n        resize="none"\n        type="textarea"\n        placeholder="请输入代码或上传对应文件"\n      />\n      <el-button class="trans-button" type="primary" @click="caculateTapped"\n        >解析</el-button\n      > ')]})),_:1}),(0,a.Wm)(h,{span:1}),(0,a.Wm)(h,{span:14},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{column:4,direction:"vertical",border:"",size:"small"},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{label:"介绍",span:4,align:"center","label-align":"center"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.gameInfo||"-"),1)]})),_:1})]})),_:1}),(0,a.Wm)(m,{class:"margin-top",data:t.tableData,border:"",style:{width:"100%"},height:"510","show-summary":"","empty-text":"暂无数据","summary-method":d.getSummaries,onSelectionChange:d.handleSelectionChange},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{type:"selection",width:"55"}),(0,a.Wm)(f,{property:"title",label:"功能名称",width:"180"}),(0,a.Wm)(f,{property:"code",label:"代码区段","show-overflow-tooltip":""},{default:(0,a.w5)((function(t){return[(0,a._)("span",o,(0,i.zw)(t.row.code||""),1)]})),_:1})]})),_:1},8,["data","summary-method","onSelectionChange"]),(0,a.Wm)(b,{class:"code-button",type:"primary",plain:"",onClick:d.createCode},{default:(0,a.w5)((function(){return[(0,a.Uk)("生成金手指")]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),(0,a.Wm)(D,{modelValue:t.dialogFormVisible,"onUpdate:modelValue":e[5]||(e[5]=function(e){return t.dialogFormVisible=e}),title:"金手指信息"},{footer:(0,a.w5)((function(){return[(0,a._)("span",r,[(0,a.Wm)(b,{onClick:e[4]||(e[4]=function(e){return t.dialogFormVisible=!1})},{default:(0,a.w5)((function(){return[(0,a.Uk)("取消")]})),_:1}),(0,a.Wm)(b,{type:"primary",onClick:d.cheatSelected},{default:(0,a.w5)((function(){return[(0,a.Uk)(" 选择 ")]})),_:1},8,["onClick"])])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(C,{model:t.form},{default:(0,a.w5)((function(){return[(0,a.Wm)(y,{label:"游戏名称","label-width":140},{default:(0,a.w5)((function(){return[(0,a.Wm)(w,{modelValue:t.form.name,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.form.name=e}),autocomplete:"off",disabled:""},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(y,{label:"TID","label-width":140},{default:(0,a.w5)((function(){return[(0,a.Wm)(w,{modelValue:t.form.tid,"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.form.tid=e}),autocomplete:"off",readonly:""},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(y,{label:"BID","label-width":140},{default:(0,a.w5)((function(){return[(0,a.Wm)(x,{modelValue:t.form.bid,"onUpdate:modelValue":e[3]||(e[3]=function(e){return t.form.bid=e}),placeholder:"请选择版本"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.bids,(function(t){return(0,a.wg)(),(0,a.j4)(v,{label:t,value:t},null,8,["label","value"])})),256))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue"])],64)}],["__scopeId","data-v-0f925cd4"]])}}]);